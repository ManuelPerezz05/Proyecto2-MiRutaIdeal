<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro - Tu Camino Ideal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Mulish', sans-serif;
      background: url('img/home/banner-home-catedral.jpg') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .register-container {
      background-color: rgba(255, 255, 255, 0.95);
      padding: 30px 40px;
      border-radius: 10px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
      max-width: 450px;
      width: 100%;
      text-align: center;
    }
    .register-container img {
      max-width: 120px;
      margin-bottom: 20px;
    }
    .register-container h2 {
      margin-bottom: 20px;
      color: #00598c;
    }
    .register-container .input-group {
      margin-bottom: 15px;
      text-align: left;
    }
    .register-container label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .register-container input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    .register-container button {
      width: 100%;
      padding: 12px;
      background-color: #00598c;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .register-container button:hover {
      background-color: #00466f;
    }
    .register-container .footer-link {
      margin-top: 15px;
      font-size: 14px;
    }
    .register-container .footer-link a {
      color: #00598c;
      text-decoration: none;
    }
    .register-container .footer-link a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

    	<!-- Google Tag Manager (noscript) body -->
	<noscript><iframe src="https://www.googletagmanager.com/"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<!-- End Google Tag Manager (noscript) -->

	    

    
    <div class="layer"></div>


    <header>
    <div class="container">
        <div class="row">
            <div class="col-6 col-sm-3">
                <div id="logo_home">

                    <a href="index.html" title="agencia camino de santiago">Tu Buen Camino</a>
                </div>
            </div>
            <nav class="col-6 col-sm-9">
                <a href="contacto/" class="d-block d-lg-none header_mail"><i class="fa fa-envelope"></i></a>
                <a href="tel:+34981112147" class="d-block d-lg-none header_tel"><i class="fa fa-phone"></i></a>
                <a class="cmn-toggle-switch cmn-toggle-switch__htx open_close" href="javascript:void(0);"><span>Menu mobile</span></a>
                <div class="main-menu">
                    <div id="header_menu">
                        <img src="img/logo_home.png" width="160" alt="Tu Buen Camino">
                    </div>
                    <a href="javascript:void(0);" class="open_close" id="close_in"><i class="icon_set_1_icon-77"></i></a>

                    <ul class="d-none d-lg-block">

  <li><a class="show-submenu"></i></a><ul><li class="li_rutas">Rutas Adventure</li><li><a href="camino-frances-desde-sarria-adventure.html" title="Camino Francés ">Camino Francés</a></li><li><a href="-adventure.html" title="Camino del Norte">Camino del Norte</a></li><li><a href="camino-portugues-desde-tui-adventure.html" title="Camino Primitivo">Camino Primitivo</a></li><li><a href="nuestras-rutas-adventure.html">Más rutas Adventure...</a></li></ul></li>
  <li><a class="show-submenu" href="caminos/">Caminos <i class="icon-down-open-mini"></i></a><ul><li><a href="camino-frances.html" title="Camino Francés">Camino Francés</a></li><li><a href="camino-primitivo.html" title="Camino Primitivo">Camino Primitivo</a></li><li><a href="camino-norte.html" title="Camino Norte">Camino Norte</a></li></li><li><a href="camino-de-santiago-en-bici.html" title="Camino en Bicicleta">Camino en Bicicleta</a></li></ul></li>
  <li><a class="show-submenu" href="servicios.html">Servicios <i class="icon-down-open-mini"></i></a><ul><li><a href="desayunos.html">Desayunos</a></li><li><a href="cenas.html">Cenas</a></li><li><a href="traslados-puntos-inicio.html">Traslado a los puntos de inicio</a></li><li><a href="transporte-mochilas.html">Transporte de mochilas</a></li><li><a href="traslados-aeropuerto-santiago.html">Traslados al aeropuerto de Santiago</a></li><li><a href="garaje-santiago.html">Garaje en Santiago</a></li></ul></li>
  <li><a class="show-Fsubmenu" href="contacto.html">Contacto</a></li>
  <li class="show-submenu"><a href="#" class="show-submenu"><i class="fa fa-globe"></i></a><ul><li><a title=English href="en/">English</a></li><li><a title=Français href="fr/">Français</a></li><li><a title=Italiano href="it/">Italiano</a></li><li><a title=Deutsch href="de/">Deutsch</a></li><li><a title=Português href="pt/">Português</a></li></ul>

</li>
</li>

    <div class="header-contacto"><div class="header-contacto-mail">
    <a href="mailto:tuemail@holaluis.com"><i class="fa fa-envelope"></i></a>
    </div>
    
    <div class="header-contacto-tel"><i class="fa fa-phone">
    </i> +34 641 30 75 31</div>
    </div>

    <div class="header-contacto"><div class="header-contacto-mail">
    <a href="login.html"><i class="fa fa-user"></i></a>
</div>

</ul>

<ul class="d-block d-lg-none">

  <li><a class="show-submenu" href="javascript:void(0);">Nuestras Rutas <i class="icon-down-open-mini"></i></a><ul><li class="li_rutas">Rutas Premium</li><li><a href="camino-frances-desde-sarria/">Camino Francés desde Sarria</a></li><li><a href="camino-frances-desde-sarria-con-melide/">Camino Francés desde Sarria con Melide</a></li><li><a href="camino-portugues-desde-tui/">Camino Portugués desde Tui</a></li><li><a href="camino-ingles-desde-ferrol/">Camino Inglés desde Ferrol</a></li><li><a href="camino-de-santiago-a-fisterra/">Camino de Santiago a Fisterra</a></li><li><a href="camino-primitivo-desde-lugo/">Camino Primitivo desde Lugo</a></li><li><a href="camino-primitivo-desde-oviedo/">Camino Primitivo desde Oviedo</a></li><li><a href="camino-santiago-desde-roncesvalles-Santiago/">Camino Francés de Roncesvalles a Santiago</a></li><li><a href="camino-santiago-desde-roncesvalles/">Camino Francés de Roncesvalles a Logroño</a></li><li><a href="camino-santiago-desde-logrono/">Camino Francés de Logroño a Burgos</a></li><li><a href="camino-santiago-desde-burgos/">Camino Francés de Burgos a León</a></li><li><a href="camino-santiago-desde-leon/">Camino Francés desde León a Ponferrada</a></li><li><a href="camino-santiago-desde-ponferrada/">Camino Francés desde Ponferrada a Sarria</a></li><li><a href="camino-santiago-bicicleta-desde-leon/">Camino Francés en bici desde León</a></li><li><a href="camino-santiago-bicicleta-desde-ponferrada/">Camino Francés en bici desde Ponferrada</a></li><li><a href="camino-portugues-desde-oporto/">Camino Portugués desde Oporto</a></li><li><a href="camino-del-norte-desde-villalba/">Camino del Norte desde Vilalba</a></li><li><a href="camino-portugues-costa-desde-oporto/">Camino Portugués por la Costa desde Oporto</a></li><li><a href="camino-portugues-costa-desde-a-guarda/">Camino Portugués por la Costa desde A Guarda </a></li><li><a href="camino-portugues-costa-oporto-a-guarda/">Camino Portugués por la Costa desde Oporto a A Guarda</a></li><li><a href="via-plata-desde-ourense/">Vía de la Plata desde Ourense</a></li><li><a href="camino-santiago-bicicleta-desde-burgos/">Camino Francés en bici desde Burgos</a></li><li><a href="camino-santiago-bicicleta-desde-roncesvalles/">Camino Francés en bici desde Roncesvalles</a></li><li><a href="camino-frances-desde-sarria-perro/">Camino Francés con Perro</a></li><li><a href="camino-potugues-desde-oporto-bici/">Camino Portugués en bici desde Oporto</a></li><li class="li_rutas">Rutas Adventure</li><li><a href="camino-frances-desde-sarria-adventure/">Camino Francés desde Sarria</a></li><li><a href="camino-frances-desde-sarria-con-melide-adventure/">Camino Francés desde Sarria con Melide</a></li><li><a href="camino-portugues-desde-tui-adventure/">Camino Portugués desde Tui</a></li><li><a href="camino-de-santiago-a-fisterra-adventure/">Camino de Santiago a Fisterra</a></li></ul></li><li><a class="show-submenu" href="javascript:void(0);">Servicios <i class="icon-down-open-mini"></i></a><ul><li><a href="desayunos/">Desayunos</a></li><li><a href="cenas/">Cenas</a></li><li><a href="traslados-puntos-inicio/">Traslado a los puntos de inicio</a></li><li><a href="transporte-mochilas/">Transporte de mochilas</a></li><li><a href="traslados-aeropuerto-santiago/">Traslados al aeropuerto de Santiago</a></li><li><a href="garaje-santiago/">Garaje en Santiago</a></li></ul></li><li><a class="show-submenu" href="javascript:void(0);">Caminos <i class="icon-down-open-mini"></i></a><ul><li><a href="camino-frances/">Camino Francés</a></li><li><a href="camino-portugues/">Camino Portugués</a></li><li><a href="camino-ingles/">Camino Inglés</a></li><li><a href="camino-primitivo/">Camino Primitivo</a></li><li><a href="camino-de-santiago-en-bici/">Camino en Bicicleta</a></li><li><a href="camino-finisterre/">Camino de Finisterre</a></li><li><a href="/camino-frances-sarria-grupo" title="Camino en Grupo">Camino en Grupo</a></li></ul></li><li><a href="contacto/">Contacto</a></li><li classs="submenu"><a class="show-submenu"><i class="fa fa-globe"></i> Idiomas</a><ul><li><a title=English href="en/">English</a></li><li><a title=Français href="fr/">Français</a></li><li><a title=Italiano href="it/">Italiano</a></li><li><a title=Deutsch href="de/">Deutsch</a></li><li><a title=Português href="pt/">Português</a></li></ul></li>


</ul>

                </div>
            </nav>
        </div>
    </div>
</header>
  <div class="register-container">
    <img src="img/logo_home.png" alt="Tu Camino Ideal">
    <h2><i class="fa fa-user-plus"></i> Crear cuenta</h2>
    <form id="registro-form">
      <div class="input-group">
        <label for="nombre">Nombre completo</label>
        <input type="text" id="nombre" name="nombre" required>
      </div>
      <div class="input-group">
        <label for="email">Correo electrónico</label>
        <input type="email" id="email" name="email" required>
      </div>
      <div class="input-group">
        <label for="password">Contraseña</label>
        <input type="password" id="password" name="password" required>
      </div>
      <button type="submit">Registrarse</button>
    </form>
    <div class="footer-link">
      ¿Ya tienes cuenta? <a href="login.html">Inicia sesión</a>
    </div>
  </div>

  <script>
    document.getElementById("registro-form").addEventListener("submit", async function (e) {
      e.preventDefault();

      const nombre = document.getElementById("nombre").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      try {
        // Registro del usuario
        const res = await fetch("http://localhost:3000/usuarios/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ nombre, email, password })
        });

        if (!res.ok) throw new Error("Error al registrar");

        // Login inmediato tras el registro
        const loginRes = await fetch("http://localhost:3000/usuarios/login", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({ username: email, password })
        });

        if (!loginRes.ok) throw new Error("Error al iniciar sesión");

        const loginData = await loginRes.json();
        localStorage.setItem("token", loginData.access_token);

        alert("Usuario registrado y logueado correctamente");
        window.location.href = "perfil.html";
      } catch (err) {
        alert(err.message);
      }
    });
  </script>
</body>
</html>
