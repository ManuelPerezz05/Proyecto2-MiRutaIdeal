$("#form-reserva-btn").click(function(){var a=!1;""==$("#primeranoche").val()&&(alert("Seleccione una fecha para iniciar el camino"),a=!0),1>numeroPersonas()&&(alert("Debe seleccionar al menos un tipo de habitaci\xf3n"),a=!0),a||$("#form-reserva").submit()}),$("#form-reserva-pago-btn").click(function(){var a=!1;""==$("#fpago").val()&&(alert("Seleccione una forma de pago"),a=!0),$("#acepto").prop("checked")||(alert("Debe aceptar las politicas de privacidad, reservas y cancelaciones"),a=!0),a||$("#form-reserva-pago").submit()});var fechasCerradas=$("#fechas_cerradas").val();function numeroPersonas(){var a=0;return $(".input-tipologias").each(function(b,c){a+=parseInt($(this).val())*parseInt($(this).data("personas"))}),a}function obtenerPrecioTablas(a){return $.ajax({url:"includes/ajax/servPrecioTablas.php",type:"POST",data:a})}function rutaActualizaPrecio(){$("#id_ruta").val();var c=0,b=0,a=0,d=0,e=0,f=$("#noches").val(),g=!1;$(".input-tipologias").each(function(a,d){personas=parseInt($(this).val())*parseInt($(this).data("personas")),c+=parseInt($(this).val())*parseInt($(this).data("personas")),0!=$(this).val()&&(b+=parseFloat($(this).data("precio"))*personas)}),d=b,$(".check_servicios").each(function(l,m){if($(this).prop("checked")){switch($(this).data("tipoprecio")){case 1:b+=costeServicio=parseFloat($(this).data("precio"))*c;break;case 2:unidades=$('input[name="servicio_unidades['+$(this).data("idserv")+']"]').val(),b+=costeServicio=parseFloat($(this).data("precio"))*unidades;break;case 3:var a=0;g=!1;var h=$(this).data("hastas").split(","),i=Array.from(h),j=$(this).data("precios").split(","),n=Array.from(j),k=$(this).data("hastas").split(",");Array.from(k),$.each(i,function(b,d){parseInt(c)<=parseInt(d)&& !1==g&&(g=!0,a=n[b])}),b+=costeServicio=parseFloat(a)}(1==$(this).data("idserv")||2==$(this).data("idserv"))&&(e+=costeServicio),4==$(this).data("tipoprecio")&&(unidades=$('input[name="servicio_unidades['+$(this).data("idserv")+']"]').val(),b+=totalServCuatro=parseInt((d+e)/f*unidades))}}),a=b/c,$("#total-personas").html(c),$("#personas").val(c),$("#total-coste").html(b),$("#coste").val(b),a?(a=a.toLocaleString("es",{maximumFractionDigits:2}),$("#total-ppersona").html(a),$("#costepp").val(a)):($("#total-ppersona").html(0),$("#costepp").val(0))}"use strict";"use strict";$("#primeranoche").datepicker({weekStart:1,language:"es",startDate:"+7d",format:"d/m/yyyy, D",orientation:"bottom auto",autoclose:!0,datesDisabled:fechasCerradas}).on("changeDate",function(a){}),$(".numbers-reserva").append('<div class="inc-reserva button_reserva_inc">+</div><div class="dec-reserva button_reserva_inc">-</div>'),$(".button_reserva_inc").on("click",function(){var a=$(this),b=a.parent().find("input").val(),d=a.parent().find("input").data("personas");if("+"==a.text())var c=parseFloat(b)+1;else if(b>1)var c=parseFloat(b)-1;else c=0;var e=numeroPersonas();50>=parseInt(d+e)||"-"==a.text()?a.parent().find("input").val(c):alert("Para reservas de m\xe1s de 50 personas contacte con nosotros"),rutaActualizaPrecio()}),$(".numbers-reserva-servs").append('<div class="inc-reserva button_reserva_serv_inc">+</div><div class="dec-reserva button_reserva_serv_inc">-</div>'),$(".button_reserva_serv_inc").on("click",function(){var a=$(this),b=a.parent().find("input").val();if("+"==a.text())var c=parseFloat(b)+1;else if(b>2)var c=parseFloat(b)-1;else c=1;a.parent().find("input").val(c),rutaActualizaPrecio()}),$(".check_servicios").on("change",function(){rutaActualizaPrecio();var a="servicio_ad_"+$(this).data("idserv"),b="servicio_qt_"+$(this).data("idserv");!0==$(this).prop("checked")?($("#"+a).css({display:"block"}),$("#"+b).css({display:"block"})):($("#"+a).css({display:"none"}),$("#"+b).css({display:"none"}))}),$("#modalidad_completo").on("click",function(){var a=$("#coste").val(),b=$("#costeTarjeta").val();$("#apagar").val(a),$("input[name='Importe']").val(b),$("#mpago").val(1),$("#mpago_porcentaje_final").val(100),$.post("includes/ajax/modpago.php",$("#form-reserva-pago").serialize()),$("#modalidad_fraccionado").removeClass("boxFormaPagoActiva"),$(this).removeClass("boxFormaPago").addClass("boxFormaPagoActiva")}),$("#modalidad_fraccionado").on("click",function(){var a=$("#costefraccionado").val(),b=$("#costefraccionadoTarjeta").val(),c=$("#mpago_porcentaje").val();$("#apagar").val(a),$("input[name='Importe']").val(b),$("#mpago").val(2),$("#mpago_porcentaje_final").val(c),$.post("includes/ajax/modpago.php",$("#form-reserva-pago").serialize()),$("#modalidad_completo").removeClass("boxFormaPagoActiva"),$(this).removeClass("boxFormaPago").addClass("boxFormaPagoActiva")}),$("#pago_transferencia").on("click",function(){switch($("#idioma").val()){case"es":$("#form-reserva-pago").attr("action","reservar-fin/");break;case"en":$("#form-reserva-pago").attr("action","en/booking-finish/");break;case"fr":$("#form-reserva-pago").attr("action","fr/reserver-fin/");break;case"pt":$("#form-reserva-pago").attr("action","pt/reserva-fim/");break;case"de":$("#form-reserva-pago").attr("action","de/reservieren-fertig/");break;case"it":$("#form-reserva-pago").attr("action","it/riserva-finire/")}$("#fpago").val(1),$("#pago_tarjeta").removeClass("boxFormaPagoActiva"),$(this).removeClass("boxFormaPago").addClass("boxFormaPagoActiva")}),$("#pago_tarjeta").on("click",function(){$("#form-reserva-pago").attr("action","https://pgw.ceca.es/tpvweb/tpv/compra.action"),$("#fpago").val(2),$("#pago_transferencia").removeClass("boxFormaPagoActiva");var a=$("#form-reserva-pago").serialize();$("#datosPago").load("includes/ajax/fpago-ceca.php",a),$(this).removeClass("boxFormaPago").addClass("boxFormaPagoActiva")}),$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').not(".accordion-toggle").click(function(b){var a=$(this.hash);(a=a.length?a:$("[name="+this.hash.slice(1)+"]")).length&&(b.preventDefault(),$("html, body").animate({scrollTop:a.offset().top-100},500,function(){var b=$(a);if(b.focus(),b.is(":focus"))return!1;b.attr("tabindex","-1"),b.focus()}))}),$(".counter").each(function(){$(this).prop("Counter",0).animate({Counter:$(this).text()},{duration:4e3,easing:"swing",step:function(a){$(this).text(Math.ceil(a))}})}),$(".galeria-ficha").magnificPopup({delegate:"a",type:"image",tLoading:"Cargando imagen #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(a){return a.el.attr("title")}}}),$(".btn-guardar-datos-serv").click(function(){var a=$(this).data("idserv"),b=$("#info_adicional_req_txt_"+a).val();""!=b?($.post("includes/ajax/posts.php",{acc:"mod_txt_obs_serv",id_servicio:a,texto_servicio:b}),$("#obs_serv_div_"+a).html('<b class="text-info">Observaciones:</b> <em>'+b+"</em>")):alert("Debe rellenar el campo")}),$("#fichaMenu_descripcion").click(function(){$("#fichaMenu_galeria").removeClass("fichaMenu_activa"),$("#fichaMenu_itinerario").removeClass("fichaMenu_activa"),$("#fichaMenu_opiniones").removeClass("fichaMenu_activa"),$("#fichaMenu_descripcion").addClass("fichaMenu_activa")}),$("#fichaMenu_galeria").click(function(){$("#fichaMenu_descripcion").removeClass("fichaMenu_activa"),$("#fichaMenu_itinerario").removeClass("fichaMenu_activa"),$("#fichaMenu_opiniones").removeClass("fichaMenu_activa"),$("#fichaMenu_galeria").addClass("fichaMenu_activa")}),$("#fichaMenu_itinerario").click(function(){$("#fichaMenu_descripcion").removeClass("fichaMenu_activa"),$("#fichaMenu_galeria").removeClass("fichaMenu_activa"),$("#fichaMenu_opiniones").removeClass("fichaMenu_activa"),$("#fichaMenu_itinerario").addClass("fichaMenu_activa")}),$("#fichaMenu_opiniones").click(function(){$("#fichaMenu_descripcion").removeClass("fichaMenu_activa"),$("#fichaMenu_galeria").removeClass("fichaMenu_activa"),$("#fichaMenu_itinerario").removeClass("fichaMenu_activa"),$("#fichaMenu_opiniones").addClass("fichaMenu_activa")})